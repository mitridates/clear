{#
Map. Index
@controller MapController:indexAction
@route /map
@path admin_map_index
@var FormView form
#}
{% set page= initPage(
    'map',
    'index',
    'map.index.title'|trans({},'cavepages'),
    path('admin_map_index'))
    .set('heading', 'map.index.heading'|trans({},'cavepages'))
%}
{% set md = {row_attr:{class:'col-md'}} %}
{% set mdcheck = {row_attr:{class:'mt-checkbox col-md'}} %}
{% set md6 = {row_attr:{class:'col-md-6'}} %}

{% extends '@admin/base.html.twig' %}
{% block subheading %}
    {% include '@admin/map/subheading_buttons.html.twig'%}
{% endblock %}

{% block content %}
    {{ form_start(form) }}
    <div class="row">
        {{ form_row(form.name, md)}}
        {{ form_row(form.type, md)}}
        {{ form_row(form.sourcetype, md)}}
    </div>

    <div class="row">
        {{ form_row(form.country, dataRepopulate('country', '#'~form.admin1.vars.id)|merge(md))}}
        {{ form_row(form.admin1, dataRepopulate('admin1', '#'~form.admin2.vars.id~', #'~form.area.vars.id)|merge(md))}}
    </div>
    <div class="row">
        {{ form_row(form.area, dataRepopulate('area')|merge(md))}}
        {{ form_row(form.admin2, dataRepopulate('admin2', '#'~form.admin3.vars.id)|merge(md))}}
        {{ form_row(form.admin3, dataRepopulate('admin3')|merge(md))}}
    </div>
    <div class="row">
        {{ form_row(form.mapserie, dataSuggest('mapserie')|merge(md))}}
        {{ form_row(form.sourcecountry, md)}}
        {{ form_row(form.sourceorg, dataSuggest('organisation')|merge(md))}}
    </div>

    <div class="row">
        <div class="form-group">
            {% include '@object/bttn/bttn_reset.html.twig'%}
            {% include '@object/bttn/bttn_search.html.twig' with {'id': 'js-search'}%}
        </div>
    </div>
    {{ form_end(form) }}
    <hr/>

{# paginator#}
<div style="display: block;overflow-x: auto;white-space: nowrap;">
{% embed '@object/pager/paginator_table.html.twig' with{
    id: 'paginatorWrapper',
    action: path('admin_map_list_json'),
    source: '#'~form.vars.attr.id,
} %}
{% block head %}
    <th data-sort data-orderby="name" class="cursor-pointer" >Name</th>
    <th data-sort data-orderby="country" class="cursor-pointer" >{{ 'government.level.country'|trans({}, 'cavemessages')}}</th>
    <th data-sort data-orderby="admin1" class="cursor-pointer" >{{ 'government.level.admin1'|trans({}, 'cavemessages')}}</th>
    <th>comment</th>
{% endblock head %}
{% block script %}
{% verbatim %}
    <td><a href="{{this.links.view}}">{{this.attributes.name}}</a></td>
    <td>{{this.attributes.country}}</td>
    <td>{{this.attributes.admin1}}</td>
    <td>{{this.attributes.comment}}</td>

{% endverbatim %}
{% endblock script%}
{% endembed %}
</div>
{# /paginator#}
{% endblock %}

{% block footer_javascripts %}
    <script>
        (new Repopulate('#{{ form.country.vars.id }}')).populate();
        <!-- PaginaciÃ³n mediante handlebars, requiere helper y JSpager-->
        Pagination('#paginatorWrapper', {sort:'ASC',orderby: 'name'}).submit();
    </script>
{% endblock %}
