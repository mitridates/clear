{#
Organisation parameter. Index
@controller BackendOrganisationController:indexAction
@route admin/organisation
@path admin_organisation_index
@package organisation
@var FormView form
#}
{% set page= initPage(
        'organisation',
        'index',
        'organisation.index.title'|trans({},'cavepages'),
        path('admin_organisation_index'))
        .set('heading', 'organisation.index.heading'|trans({},'cavepages'))
%}
{% set md = {row_attr:{class:'col-md'}} %}
{% extends '@admin/base.html.twig' %}

{% block subheading %}
    {% include '@admin/organisation/subheading_buttons.html.twig'%}
{% endblock %}
{% block content %}
    {{ form_start(form) }}
    <div class="row">
        {{ form_row(form.name, md)}}
        {{ form_row(form.country, dataRepopulate('country', '#'~form.admin1.vars.id)|merge(md))}}
    </div>

    <div class="row">
        {{ form_row(form.admin1, dataRepopulate('admin1', '#'~form.admin2.vars.id)|merge(md))}}
        {{ form_row(form.admin2, dataRepopulate('admin2', '#'~form.admin3.vars.id)|merge(md))}}
        {{ form_row(form.admin3, dataRepopulate('admin3')|merge(md))}}
    </div>
    <div class="row">
        {{ form_row(form.type,md)}}
        {{ form_row(form.coverage,md)}}
        {{ form_row(form.grouping,md)}}
    </div>
    <div class="row">
        <div class="form-group">
            {% include '@object/bttn/bttn_reset.html.twig'%}
            {% include '@object/bttn/bttn_search.html.twig' with {'id': 'js-search'}%}
        </div>
    </div>
    {{ form_end(form) }}
<hr/>

{# paginator#}
<div style="display: block;overflow-x: auto;white-space: nowrap;">
{% embed '@object/pager/paginator_table.html.twig' with{
    id: 'paginatorWrapper',
    action: path('admin_organisation_list_json'),
    source: '#'~form.vars.attr.id
} %}
{% block head %}
    <th data-sort  data-orderby="name">Name</th>
    <th data-sort data-orderby="country">{{ 'government.level.country'|trans({}, 'cavemessages')}}</th>
    <th>{{ 'government.level.admin1'|trans({}, 'cavemessages')}}</th>
    <th>{{ 'government.level.admin2'|trans({}, 'cavemessages')}}</th>
    <th>{{ 'government.level.admin3'|trans({}, 'cavemessages')}}</th>
{% endblock head %}
{% block script %}
{% verbatim %}
    <td><a href="{{this.links.self}}">{{this.attributes.name}}</a></td>
    <td class="text-center">{{this.attributes.country}}</td>
    <td class="text-center">{{this.attributes.admin1}}</td>
    <td class="text-center">{{this.attributes.admin2}}</td>
    <td class="text-center">{{this.attributes.admin3}}</td>
{% endverbatim %}
{% endblock script%}
{% endembed %}
</div>
{# /paginator#}
{% endblock %}
{% block footer_javascripts %}
    <script>
        (new Repopulate('#{{ form.country.vars.id }}')).populate();
        //Paginaci√≥n mediante handlebars
        let params= {//post/get init parameters
                sort:'ASC',
                orderby: 'name',
                limit:20,//Max items per page (if navbar===true)
            },
            mod= {//modify defaults
                // navbar: false,//default true
                classSort: 'fa-sort',
                pagerSize:8//Max links
            }
        ;
        Pagination('#paginatorWrapper', params, mod).submit();
    </script>
{% endblock %}
