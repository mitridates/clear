{#
Specie. New
@controller SpecieController:newAction
@route admin/person/new/
@path admin_person_new
@var FormView form
#}
{% do addCrumb('person.index.title'|trans({},'cavepages'), path('admin_person_index')) %}
{% set page= initPage(
    'person',
    'new',
    'person.new.title'|trans({},'cavepages'),
    path('admin_person_new'))
    .set('heading', 'person.new.heading'|trans({},'cavepages'))
%}
{% extends '@admin/base.html.twig' %}
{% block subheading %}
    {% include '@admin/person/subheading_buttons.html.twig'%}
{% endblock %}
{% block content %}
    {% include '@admin/person/person_form.html.twig' %}
    {% if not form.vars.valid %}
        {% include '@object/modal/errors.html.twig'%}
    {% endif %}
{% endblock %}

{% block footer_javascripts %}
<script>
    {% if not form.vars.valid %}
    bootstrap.Modal.getOrCreateInstance(document.querySelector('#modal-errors')).show();
    {% endif %}
    (new Repopulate('#{{ form.country.vars.id }}')).populate();
    let organisations= document.querySelectorAll('.js-organisation');
    for(let i=0; i<organisations.length; i++){
        JSuggest(organisations[i]);
    }
</script>
{% endblock %}
